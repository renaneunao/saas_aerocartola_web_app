<!DOCTYPE html>
<html lang="pt-BR" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Aero Cartola</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'dark-blue': {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                            950: '#082f49'
                        }
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.3s ease-out',
                        'bounce-subtle': 'bounceSubtle 2s infinite',
                        'pulse-glow': 'pulseGlow 2s ease-in-out infinite alternate',
                        'float': 'float 6s ease-in-out infinite'
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' }
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(100%)' },
                            '100%': { transform: 'translateY(0)' }
                        },
                        bounceSubtle: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-5px)' }
                        },
                        pulseGlow: {
                            '0%': { boxShadow: '0 0 5px rgba(14, 165, 233, 0.5)' },
                            '100%': { boxShadow: '0 0 20px rgba(14, 165, 233, 0.8)' }
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0px)' },
                            '50%': { transform: 'translateY(-20px)' }
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="min-h-full text-white" style="background-color: #0c1f36;">
    <!-- Background Elements -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
        <!-- Floating Soccer Balls -->
        <div class="absolute top-10 left-8 text-dark-blue-800/20 text-2xl animate-float">
            <i class="fas fa-futbol"></i>
        </div>
        <div class="absolute top-20 right-12 text-dark-blue-800/15 text-3xl animate-float" style="animation-delay: -2s;">
            <i class="fas fa-futbol"></i>
        </div>
        <div class="absolute bottom-16 left-12 text-dark-blue-800/15 text-2xl animate-float" style="animation-delay: -4s;">
            <i class="fas fa-futbol"></i>
        </div>
        <div class="absolute bottom-10 right-6 text-dark-blue-800/15 text-xl animate-float" style="animation-delay: -1s;">
            <i class="fas fa-futbol"></i>
        </div>
        
        <!-- Geometric Shapes -->
        <div class="absolute top-1/4 left-1/4 w-24 h-24 bg-gradient-to-br from-blue-500/8 to-blue-600/8 rounded-full blur-xl animate-pulse"></div>
        <div class="absolute bottom-1/4 right-1/4 w-32 h-32 bg-gradient-to-br from-purple-500/8 to-purple-600/8 rounded-full blur-2xl animate-pulse" style="animation-delay: -1s;"></div>
    </div>

    <!-- Main Content -->
    <div class="h-screen flex items-center justify-center py-4 px-4 sm:px-6 lg:px-8 relative z-10 overflow-y-auto">
        <div class="max-w-md w-full space-y-4">
            <!-- Header -->
            <div class="text-center animate-fade-in">
                <div class="flex justify-center mb-3">
                    <div class="flex items-center justify-center">
                        <img src="{{ url_for('static', filename='logo/aero-cartola-logo.png') }}" 
                             alt="Aero Cartola" 
                             class="max-w-[220px] w-full h-auto object-contain">
                    </div>
                </div>
                <p class="text-base text-dark-blue-200 mb-1" id="welcomeText">Bem-vindo de volta!</p>
                <p class="text-xs text-dark-blue-300" id="subtitleText">Faça login para acessar sua conta</p>
            </div>

            <!-- Tabs: Login / Registro -->
            <div class="bg-gradient-to-br from-dark-blue-800/50 to-dark-blue-900/50 backdrop-blur-sm rounded-xl shadow-2xl border border-dark-blue-700/50 overflow-hidden animate-fade-in">
                <div class="flex border-b border-dark-blue-700/50">
                    <button type="button" id="loginTab" class="flex-1 py-2.5 px-4 text-center font-semibold text-white bg-dark-blue-700/50 transition-all duration-200 text-sm" onclick="switchTab('login')">
                        <i class="fas fa-sign-in-alt mr-1.5"></i>Entrar
                    </button>
                    <button type="button" id="registerTab" class="flex-1 py-2.5 px-4 text-center font-semibold text-dark-blue-300 hover:text-white transition-all duration-200 text-sm" onclick="switchTab('register')">
                        <i class="fas fa-user-plus mr-1.5"></i>Criar Conta
                    </button>
                </div>

            <!-- Login Form -->
            <div id="loginFormContainer" class="p-5">
                <form method="post" action="{{ url_for('login') }}" class="space-y-4" id="loginForm">
                    <!-- Flash Messages -->
                    {% with messages = get_flashed_messages(with_categories=true) %}
                        {% if messages %}
                            <div class="space-y-2 mb-4">
                                {% for category, message in messages %}
                                <div class="animate-fade-in p-2.5 rounded-lg border-l-4 {% if category == 'error' or category == 'danger' %}bg-red-900/50 border-red-500 text-red-200{% elif category == 'success' %}bg-green-900/50 border-green-500 text-green-200{% elif category == 'warning' %}bg-yellow-900/50 border-yellow-500 text-yellow-200{% else %}bg-blue-900/50 border-blue-500 text-blue-200{% endif %} backdrop-blur-sm shadow-lg text-sm">
                                    <div class="flex items-center space-x-2">
                                        <i class="fas {% if category == 'error' or category == 'danger' %}fa-exclamation-triangle{% elif category == 'success' %}fa-check-circle{% elif category == 'warning' %}fa-exclamation-circle{% else %}fa-info-circle{% endif %}"></i>
                                        <span>{{ message }}</span>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        {% endif %}
                    {% endwith %}

                    <!-- Username/Email Field -->
                    <div>
                        <label for="username" class="block text-xs font-medium text-dark-blue-200 mb-1.5">
                            <i class="fas fa-user text-blue-400 mr-1.5"></i>
                            Usuário ou Email
                        </label>
                        <div class="relative">
                            <input type="text" 
                                   id="username" 
                                   name="username" 
                                   required
                                   class="w-full bg-dark-blue-800/50 border border-dark-blue-600/50 text-white rounded-lg px-3 py-2 pl-10 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm"
                                   placeholder="Digite seu usuário ou email">
                            <div class="absolute inset-y-0 left-0 pl-2.5 flex items-center pointer-events-none">
                                <i class="fas fa-user text-dark-blue-400 text-sm"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Password Field -->
                    <div>
                        <label for="password" class="block text-xs font-medium text-dark-blue-200 mb-1.5">
                            <i class="fas fa-lock text-green-400 mr-1.5"></i>
                            Senha
                        </label>
                        <div class="relative">
                            <input type="password" 
                                   id="password" 
                                   name="password" 
                                   required
                                   class="w-full bg-dark-blue-800/50 border border-dark-blue-600/50 text-white rounded-lg px-3 py-2 pl-10 pr-10 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200 text-sm"
                                   placeholder="Digite sua senha">
                            <div class="absolute inset-y-0 left-0 pl-2.5 flex items-center pointer-events-none">
                                <i class="fas fa-lock text-dark-blue-400 text-sm"></i>
                            </div>
                            <button type="button" 
                                    onclick="togglePassword()"
                                    class="absolute inset-y-0 right-0 pr-2.5 flex items-center text-dark-blue-400 hover:text-white transition-colors duration-200">
                                <i class="fas fa-eye text-sm" id="toggleIcon"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Remember Me & Forgot Password -->
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <input type="checkbox" 
                                   id="remember" 
                                   name="remember"
                                   class="w-3.5 h-3.5 bg-dark-blue-800/50 border-dark-blue-600/50 rounded focus:ring-2 focus:ring-blue-500 text-blue-600 transition-colors duration-200">
                            <label for="remember" class="ml-1.5 text-xs text-dark-blue-300 cursor-pointer">
                                Lembrar de mim
                            </label>
                        </div>
                        <a href="{{ url_for('esqueceu_senha') }}" class="text-xs text-blue-400 hover:text-blue-300 transition-colors duration-200">
                            Esqueceu a senha?
                        </a>
                    </div>

                    <!-- Login Button -->
                    <button type="submit" 
                            class="w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] shadow-lg hover:shadow-xl flex items-center justify-center space-x-2 text-sm">
                        <i class="fas fa-sign-in-alt"></i>
                        <span>Entrar</span>
                    </button>
                </form>
            </div>

            <!-- Register Form -->
            <div id="registerFormContainer" class="p-5 hidden">
                <form method="post" action="{{ url_for('register') }}" class="space-y-4" id="registerForm">
                    <!-- Flash Messages -->
                    {% with messages = get_flashed_messages(with_categories=true) %}
                        {% if messages %}
                            <div class="space-y-2 mb-4">
                                {% for category, message in messages %}
                                <div class="animate-fade-in p-2.5 rounded-lg border-l-4 {% if category == 'error' or category == 'danger' %}bg-red-900/50 border-red-500 text-red-200{% elif category == 'success' %}bg-green-900/50 border-green-500 text-green-200{% elif category == 'warning' %}bg-yellow-900/50 border-yellow-500 text-yellow-200{% else %}bg-blue-900/50 border-blue-500 text-blue-200{% endif %} backdrop-blur-sm shadow-lg text-sm">
                                    <div class="flex items-center space-x-2">
                                        <i class="fas {% if category == 'error' or category == 'danger' %}fa-exclamation-triangle{% elif category == 'success' %}fa-check-circle{% elif category == 'warning' %}fa-exclamation-circle{% else %}fa-info-circle{% endif %}"></i>
                                        <span>{{ message }}</span>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        {% endif %}
                    {% endwith %}

                    <!-- Username Field -->
                    <div>
                        <label for="reg_username" class="block text-xs font-medium text-dark-blue-200 mb-1.5">
                            <i class="fas fa-user text-blue-400 mr-1.5"></i>
                            Nome de Usuário
                        </label>
                        <div class="relative">
                            <input type="text" 
                                   id="reg_username" 
                                   name="username" 
                                   required
                                   minlength="3"
                                   maxlength="50"
                                   pattern="[a-zA-Z0-9_]+"
                                   class="w-full bg-dark-blue-800/50 border border-dark-blue-600/50 text-white rounded-lg px-3 py-2 pl-10 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm"
                                   placeholder="Digite seu nome de usuário">
                            <div class="absolute inset-y-0 left-0 pl-2.5 flex items-center pointer-events-none">
                                <i class="fas fa-user text-dark-blue-400 text-sm"></i>
                            </div>
                        </div>
                        <p class="text-xs text-dark-blue-400 mt-0.5">Apenas letras, números e underscore</p>
                    </div>

                    <!-- Email Field -->
                    <div>
                        <label for="reg_email" class="block text-xs font-medium text-dark-blue-200 mb-1.5">
                            <i class="fas fa-envelope text-green-400 mr-1.5"></i>
                            Email
                        </label>
                        <div class="relative">
                            <input type="email" 
                                   id="reg_email" 
                                   name="email" 
                                   required
                                   class="w-full bg-dark-blue-800/50 border border-dark-blue-600/50 text-white rounded-lg px-3 py-2 pl-10 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200 text-sm"
                                   placeholder="Digite seu email">
                            <div class="absolute inset-y-0 left-0 pl-2.5 flex items-center pointer-events-none">
                                <i class="fas fa-envelope text-dark-blue-400 text-sm"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Full Name Field -->
                    <div>
                        <label for="reg_full_name" class="block text-xs font-medium text-dark-blue-200 mb-1.5">
                            <i class="fas fa-id-card text-purple-400 mr-1.5"></i>
                            Nome Completo (Opcional)
                        </label>
                        <div class="relative">
                            <input type="text" 
                                   id="reg_full_name" 
                                   name="full_name" 
                                   maxlength="100"
                                   class="w-full bg-dark-blue-800/50 border border-dark-blue-600/50 text-white rounded-lg px-3 py-2 pl-10 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 text-sm"
                                   placeholder="Digite seu nome completo">
                            <div class="absolute inset-y-0 left-0 pl-2.5 flex items-center pointer-events-none">
                                <i class="fas fa-id-card text-dark-blue-400 text-sm"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Password Field -->
                    <div>
                        <label for="reg_password" class="block text-xs font-medium text-dark-blue-200 mb-1.5">
                            <i class="fas fa-lock text-yellow-400 mr-1.5"></i>
                            Senha
                        </label>
                        <div class="relative">
                            <input type="password" 
                                   id="reg_password" 
                                   name="password" 
                                   required
                                   minlength="6"
                                   class="w-full bg-dark-blue-800/50 border border-dark-blue-600/50 text-white rounded-lg px-3 py-2 pl-10 pr-10 focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition-all duration-200 text-sm"
                                   placeholder="Digite sua senha (mínimo 6 caracteres)">
                            <div class="absolute inset-y-0 left-0 pl-2.5 flex items-center pointer-events-none">
                                <i class="fas fa-lock text-dark-blue-400 text-sm"></i>
                            </div>
                            <button type="button" 
                                    onclick="togglePassword('reg_password', 'reg_toggleIcon')"
                                    class="absolute inset-y-0 right-0 pr-2.5 flex items-center text-dark-blue-400 hover:text-white transition-colors duration-200">
                                <i class="fas fa-eye text-sm" id="reg_toggleIcon"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Confirm Password Field -->
                    <div>
                        <label for="reg_confirm_password" class="block text-xs font-medium text-dark-blue-200 mb-1.5">
                            <i class="fas fa-lock text-yellow-400 mr-1.5"></i>
                            Confirmar Senha
                        </label>
                        <div class="relative">
                            <input type="password" 
                                   id="reg_confirm_password" 
                                   name="confirm_password" 
                                   required
                                   class="w-full bg-dark-blue-800/50 border border-dark-blue-600/50 text-white rounded-lg px-3 py-2 pl-10 pr-10 focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition-all duration-200 text-sm"
                                   placeholder="Confirme sua senha">
                            <div class="absolute inset-y-0 left-0 pl-2.5 flex items-center pointer-events-none">
                                <i class="fas fa-lock text-dark-blue-400 text-sm"></i>
                            </div>
                            <button type="button" 
                                    onclick="togglePassword('reg_confirm_password', 'reg_confirm_toggleIcon')"
                                    class="absolute inset-y-0 right-0 pr-2.5 flex items-center text-dark-blue-400 hover:text-white transition-colors duration-200">
                                <i class="fas fa-eye text-sm" id="reg_confirm_toggleIcon"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Register Button -->
                    <button type="submit" 
                            class="w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-semibold py-2 px-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] shadow-lg hover:shadow-xl flex items-center justify-center space-x-2 text-sm">
                        <i class="fas fa-user-plus"></i>
                        <span>Criar Conta</span>
                    </button>
                </form>
            </div>
            </div>

            <!-- Footer Links -->
            <div class="text-center text-xs text-dark-blue-400 space-x-4 animate-fade-in mt-2">
                <a href="#" class="hover:text-dark-blue-200 transition-colors duration-200">Termos de Uso</a>
                <span>•</span>
                <a href="#" class="hover:text-dark-blue-200 transition-colors duration-200">Privacidade</a>
                <span>•</span>
                <a href="#" class="hover:text-dark-blue-200 transition-colors duration-200">Suporte</a>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        function switchTab(tab) {
            const loginTab = document.getElementById('loginTab');
            const registerTab = document.getElementById('registerTab');
            const loginFormContainer = document.getElementById('loginFormContainer');
            const registerFormContainer = document.getElementById('registerFormContainer');
            const welcomeText = document.getElementById('welcomeText');
            const subtitleText = document.getElementById('subtitleText');

            if (tab === 'login') {
                loginTab.classList.add('bg-dark-blue-700/50', 'text-white');
                loginTab.classList.remove('text-dark-blue-300');
                registerTab.classList.remove('bg-dark-blue-700/50', 'text-white');
                registerTab.classList.add('text-dark-blue-300');
                loginFormContainer.classList.remove('hidden');
                registerFormContainer.classList.add('hidden');
                welcomeText.textContent = 'Bem-vindo de volta!';
                subtitleText.textContent = 'Faça login para acessar sua conta';
            } else {
                registerTab.classList.add('bg-dark-blue-700/50', 'text-white');
                registerTab.classList.remove('text-dark-blue-300');
                loginTab.classList.remove('bg-dark-blue-700/50', 'text-white');
                loginTab.classList.add('text-dark-blue-300');
                registerFormContainer.classList.remove('hidden');
                loginFormContainer.classList.add('hidden');
                welcomeText.textContent = 'Crie sua conta!';
                subtitleText.textContent = 'Preencha os dados abaixo para começar';
            }
        }

        function togglePassword(inputId, iconId) {
            const passwordInput = document.getElementById(inputId);
            const toggleIcon = document.getElementById(iconId);
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleIcon.classList.remove('fa-eye');
                toggleIcon.classList.add('fa-eye-slash');
            } else {
                passwordInput.type = 'password';
                toggleIcon.classList.remove('fa-eye-slash');
                toggleIcon.classList.add('fa-eye');
            }
        }

        // Form submission with loading state
        const loginForm = document.getElementById('loginForm');
        if (loginForm) {
            loginForm.addEventListener('submit', function(e) {
                const submitBtn = this.querySelector('button[type="submit"]');
                submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Entrando...';
                submitBtn.disabled = true;
                
                // Re-enable after 5 seconds as fallback
                setTimeout(() => {
                    submitBtn.innerHTML = '<i class="fas fa-sign-in-alt"></i><span>Entrar</span>';
                    submitBtn.disabled = false;
                }, 5000);
            });
        }

        const registerForm = document.getElementById('registerForm');
        if (registerForm) {
            registerForm.addEventListener('submit', function(e) {
                // Validar campos obrigatórios
                const username = document.getElementById('reg_username').value.trim();
                const email = document.getElementById('reg_email').value.trim();
                const password = document.getElementById('reg_password').value;
                const confirmPassword = document.getElementById('reg_confirm_password').value;
                
                // Verificar se os campos obrigatórios estão preenchidos
                if (!username || !email || !password || !confirmPassword) {
                    e.preventDefault();
                    alert('Por favor, preencha todos os campos obrigatórios.');
                    return false;
                }
                
                // Validar tamanho mínimo do username
                if (username.length < 3) {
                    e.preventDefault();
                    alert('O nome de usuário deve ter pelo menos 3 caracteres.');
                    return false;
                }
                
                // Validar tamanho mínimo da senha
                if (password.length < 6) {
                    e.preventDefault();
                    alert('A senha deve ter pelo menos 6 caracteres.');
                    return false;
                }
                
                // Validar se as senhas coincidem
                if (password !== confirmPassword) {
                    e.preventDefault();
                    alert('As senhas não coincidem!');
                    return false;
                }
                
                // Desabilitar botão e mostrar loading
                const submitBtn = this.querySelector('button[type="submit"]');
                submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Criando conta...';
                submitBtn.disabled = true;
                
                // Re-enable after 10 seconds as fallback
                setTimeout(() => {
                    submitBtn.innerHTML = '<i class="fas fa-user-plus"></i><span>Criar Conta</span>';
                    submitBtn.disabled = false;
                }, 10000);
            });
        }


        // Input focus effects
        document.querySelectorAll('input').forEach(input => {
            input.addEventListener('focus', function() {
                this.parentElement.style.transform = 'scale(1.02)';
                this.parentElement.style.transition = 'transform 0.2s ease';
            });
            
            input.addEventListener('blur', function() {
                this.parentElement.style.transform = 'scale(1)';
            });
        });

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && e.target.tagName !== 'BUTTON') {
                e.preventDefault();
                const form = document.getElementById('loginForm');
                const inputs = form.querySelectorAll('input[required]');
                const currentIndex = Array.from(inputs).indexOf(e.target);
                
                if (currentIndex < inputs.length - 1) {
                    inputs[currentIndex + 1].focus();
                } else {
                    form.querySelector('button[type="submit"]').click();
                }
            }
        });

        // Auto-hide flash messages after 5 seconds
        setTimeout(function() {
            const alerts = document.querySelectorAll('[class*="bg-red-900"], [class*="bg-green-900"], [class*="bg-yellow-900"], [class*="bg-blue-900"]');
            alerts.forEach(function(alert) {
                if (alert.parentElement) {
                    alert.style.transition = 'opacity 0.5s ease-out, transform 0.5s ease-out';
                    alert.style.opacity = '0';
                    alert.style.transform = 'translateX(100%)';
                    setTimeout(function() {
                        if (alert.parentElement) {
                            alert.remove();
                        }
                    }, 500);
                }
            });
        }, 5000);
    </script>
</body>
</html>
